@using DividerType = MudBlazor.DividerType
<AuthorizeView>
    <Authorized>
        <MudLink OnClick="@(() => _isOpen = !_isOpen)">
            <MudAvatar Color="Color.Primary">NB</MudAvatar>

            <MudPopover Open="_isOpen"
                        OverflowBehavior="OverflowBehavior.FlipAlways"
                        AnchorOrigin="Origin.BottomLeft"
                        TransformOrigin="Origin.TopRight" Paper="true">

                <MudList Clickable="true" Dense="true" DisableGutters="false">
                    <MudListItem Text="Profile" Icon="@Icons.Material.Filled.Person" Href="/me/settings/profile"/>
                    <MudListItem Text="Settings" Icon="@Icons.Material.Filled.Settings" Href="/me/settings/settings"/>
                    <MudListItem Text="Locale" Icon="@Icons.Material.Filled.Language" Href="/me/settings/locale"/>

                    <MudDivider DividerType="DividerType.Inset"/>

                    <MudListItem Text="Features" Icon="@Icons.Material.Filled.Functions" Href="/me/settings/features"/>

                    <MudDivider DividerType="DividerType.Inset"/>

                    <MudListItem Text="Sign Out" Icon="@Icons.Material.Filled.Logout" Href="MicrosoftIdentity/Account/SignOut"/>
                </MudList>
            </MudPopover>
        </MudLink>
        @*@context.User!.Identity!.Name!*@
    </Authorized>
    <NotAuthorized>
        <MudLink Href="MicrosoftIdentity/Account/SignIn">Log In</MudLink>
    </NotAuthorized>
</AuthorizeView>

@code {

    private bool _isOpen = false;

}