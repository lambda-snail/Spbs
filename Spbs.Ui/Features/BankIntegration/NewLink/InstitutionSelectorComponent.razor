@using Spbs.Ui.Features.BankIntegration.Models
@inherits Spbs.Ui.Components.SelectableListComponent<Spbs.Ui.Features.BankIntegration.Models.Institution>

@if (!_isDataLoaded)
{
    <MudGrid Spacing="4">
        @for (int i = 0; i < 8; ++i)
        {
            <MudItem xs="12" md="6" lg="3">
                <MudSkeleton />
                <MudSkeleton />
                <MudSkeleton SkeletonType="SkeletonType.Rectangle" Width="200px" Height="200px" />
                <MudSkeleton SkeletonType="SkeletonType.Circle" Width="50px" Height="50px" />
            </MudItem>
        }

    </MudGrid>
}
else if (_institutions is not null)
{
    <MudGrid Spacing="4">
        @for (int i = 0; i < _institutions.Count; ++i)
        {
            int row = i;
            Institution institution = _institutions[i];
            <MudItem xs="12" md="6" lg="3">
                <MudCard Outlined="true" Class="pa-4">
                    <CardHeaderContent>
                        <MudText Typo="Typo.h6">@institution.Name</MudText>
                        <MudText Typo="Typo.body1">@institution.Bic</MudText>
                    </CardHeaderContent>
                    <MudCardMedia Image="@institution.Logo" Height="200"/>
                    
                    <MudCardActions>
                        <MudButton OnClick="@(() => SetSelected(row))"
                                   Variant="Variant.Text"
                                   Color="Color.Primary">
                            Select
                        </MudButton>

                        @if (GetSelected() == row)
                        {
                            <MudChip Color="Color.Primary">Selected</MudChip>
                        }
                    </MudCardActions>
                </MudCard>
            </MudItem>
        }

    </MudGrid>
}