@inherits Spbs.Ui.Components.SelectableListComponent<RecurringExpense>

<MudDataGrid T="RecurringExpense"
             @ref="_grid"
             Items="@_recurringExpenses"
             MultiSelection="true"
             SortMode="SortMode.Multiple"
             Filterable="false"
             Hideable="true"
             SelectedItemsChanged="@SelectedItemsChanged"
             Dense="true">
    <ToolBarContent>
        <MudToolBar>

                <MudToolBar>
                    <MudTooltip Delay="600" Text="Add a new expense">
                        <MudIconButton Icon="@Icons.Material.Filled.Add"
                                       OnClick="@(AddRecurringExpense)"
                                       Color="Color.Secondary"/>
                    </MudTooltip>

                    <MudTooltip Delay="600" Text="@EditButtonTooltip()">
                        <MudIconButton Disabled="@(_numSelectedExpenses != 1)" OnClick="EditSelectedExpense"
                                       Icon="@Icons.Material.Filled.Edit"
                                       Color="Color.Secondary"/>
                    </MudTooltip>

                    <MudTooltip Delay="600" Text="@DeleteButtonTooltip()">
                        <MudIconButton Disabled="@(_numSelectedExpenses == 0)" OnClick="DeleteExpenses"
                                       Icon="@Icons.Material.Filled.Delete"
                                       Color="Color.Secondary"/>
                    </MudTooltip>
                </MudToolBar>
          
        </MudToolBar>
    </ToolBarContent>
    <Columns>
        <SelectColumn T="RecurringExpense"/>
        <TemplateColumn T="RecurringExpense" Title="Name">
            <CellTemplate>
                <MudButton Variant="Variant.Text" Color="Color.Primary">
                    <NavLink href="@context.Item.GetDetailsUrl()">@context.Item.Name</NavLink>
                </MudButton>
            </CellTemplate>
        </TemplateColumn>
        <PropertyColumn Property="x => x.RecurrenceType" Filterable="true"/>
        <PropertyColumn Property="x => x.BillingPrincipal" Filterable="true"/>
    </Columns>
    <PagerContent>
        <MudDataGridPager T="RecurringExpense"/>
    </PagerContent>
</MudDataGrid>

<EditRecurringExpenseComponent OnUpdateCallback="ExpenseAddedOrUpdated" GetUserId="() => _userId" @ref="_editRecurringExpensesDialog"/>